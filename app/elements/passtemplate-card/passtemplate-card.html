<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="..\..\bower_components/polymer/polymer.html">
<link rel="import" href="..\..\bower_components/paper-item/paper-item.html">
<link rel="import" href="..\..\bower_components/paper-input/paper-input.html">
<link rel="import" href="..\..\bower_components/paper-button/paper-button.html">
<link rel="import" href="..\..\bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../transport-service/transport-service.html">
<link rel="import" href="../mapstudenttopoint-service/mapstudenttopoint-service.html">
<link rel="stylesheet" type="text/css" href="../../styles/styles.css">

<script type="text/javascript" src="http://code.jquery.com/jquery-1.6.2.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.14/jquery-ui.js"></script>
<script type="text/javascript" src="http://mrrio.github.io/jsPDF/dist/jspdf.debug.js"></script>
<script type="text/javascript" src="http://html2canvas.hertzen.com/build/html2canvas.js"></script>


<dom-module id="passtemplate-card">
  <template>
  <style type="text/css">
  .passtemp{

    @apply(--layout-horizontal);
    margin-left: 20%;
    margin-top: 1%;
}
.passtemp .front{
   width: 5.5cm;
  height: 8.4cm;
  background: linear-gradient(#408CD9,#5398DD,#66A3E1,#79AEE4,#8CBAE8,#A0C6EC,#B3D1F0,#CFE2F6,#ECF4FB,#FFFFFF);
  border-radius: 15px;
   border-color: #888888;
   border-style: dotted;
   border-width: 2px;
   margin-left: -20%;
   margin-top: -17.6%;
   padding-bottom: 5px;
}
.passtemp .front .header{
   @apply(--layout-horizontal);
   margin-top: -3%;
}
.passtemp .front .header .logo{

}
.passtemp .front .header .heading{
    width: 80%;
    height: 7%;
    margin-top: -20%;
    margin-left: 14.5%;
    text-align: center;
}
.passtemp .front .header .title{
    font-size: small;
    font-weight: 300;
    margin-top: 60.75%;
    margin-left: -90%;
}
.passtemp .front .header .address{
    font-size: xx-small;
    font-weight: 100;
    width: 140%;
    margin-left: -63%;
}
.passtemp .front .body1{

    margin-top: 0%;
    text-align: center;
    @apply(--layout-horizontal);
}
.passtemp .front .body2{
    @apply(--layout-horizontal);
    margin-top: 10%;

}
.passtemp .front .body2 .studimg{
    @apply(--layout-center);
    text-align: center;
    @apply(--layout-vertical);
}

.passtemp .front .body2 .studetail{
    font-size: large;
    font-weight: bolder;
    text-align: center;
    @apply(--layout-center);
    margin-top: 50%;
    margin-left: -47%;
}
.passtemp .back{
    border-radius: 15px;
   border-color: #888888;
   border-style: dotted;
   border-width: 2px;
   width: 5.5cm;
  height: 8.46cm;
  margin-left: 82%;
margin-top: -157%;
}
.passtemp .back .body3{
margin-top: 6%;
margin-left: 2%;

}
.temp{
  margin-top: 19.25%;
  padding-bottom: 2%;
}

</style>
 <paper-input hidden>{{classid}}</paper-input>
<div class="temp">
    <div class="student-image" >
      <img id="imgRes">
    </div>
    <div class="passtemp">
      <div id="canvas" style="background-image:url(fimage/1.jpg)">

        <div class="front">


          <div class="header">
            <div class="logo"><img style="width: 25%; height: 14%; margin-top: 40%; margin-left: 5%;" src="../../images/zeesouth.png"/></div>
            <div class="heading">
              <div class="title">{{schoolname}}</div>
              <div class="address">{{schooladdr}}</div>
            </div>
          </div>
          <hr></hr>
          <div class="body2">
            <div class="studimg">
              <img style="min-height: 12%;min-width: 18%; margin-top: 5%; margin-left: 70%; width: 50%;border: 1px solid;"src="images/{{sid}}.jpg" alt="Paste photo here"/>
            </div>
            <div class="studetail">
              <p style="font-size: 14px;">{{studname}}</p>
              <p style="font-size: 12px;">Class- {{classidz}}</p>
              <p style="font-size: 12px;">Zone - {{zone}}</p>
            </div>
          </div>

        </div>

        <div class="back">
         <div class="body3">
        <div class="backimg">
        <div class="backdetails">
                  <p style="font-size: 13px;"><strong>Address:</strong>
                  S/O,{{parent}} ,
                  {{address1}},
                  {{address2}},
                  {{address3}}, 
                  {{town}}-{{pin}}.</p>
                  <hr></hr>
                  <div><p style="margin: 4px 0 4px 0; display: inline;font-size: 13px;font-weight: bold;">Pickup Route:</p><p style="margin: 4px 0 4px 0;text-transform: capitalize; display: inline;font-size: 12px;">{{pickuprout}}</p></div>
                  <div><p style="margin: 4px 0 4px 0; display: inline;font-weight: bold;font-size: 13px;">Pickup Point:</p><p style="margin: 4px 0 4px 0;text-transform: capitalize; display: inline;font-size: 12px;">{{pickup}}</p></div>
                  <div><p style="margin: 4px 0 4px 0; display: inline;font-weight: bold;font-size: 13px;">Drop Route:</p><p style="margin: 4px 0 4px 0;text-transform: capitalize; display: inline;font-size: 12px;">{{droprout}}</p></div>
                  <div><p style="margin: 4px 0 4px 0; display: inline;font-weight: bold;font-size: 13px;">Drop Point:</p><p style="margin: 4px 0 4px 0;text-transform: capitalize; display: inline;font-size: 12px;">{{drop}}</p></div>
                  <hr></hr>
                  <div><strong>Parents Mob:</strong> {{mobno}}</div>
                  <hr></hr>
                  <div><strong>Transport Coordinator no: </strong><br>{{conumber}}</div>
        </div>
        </div>
        </div>

        </div>
      </div>
      </div>
    </div>
    
<mapstudenttopoint-service id="maps"></mapstudenttopoint-service>
  </template>
  <script>
  (function() {
    'use strict';
    Polymer({
      is: 'passtemplate-card',

      ready:function(){

      },
      FnClear:function(){
        this.studname="";
        this.stnd="";
        this.sec="";
        this.mobno="";
        this.blood="";
        this.value="";
        this.itemArray="";
        this.sid="";
        this.parent="";
        this.address1="";
        this.address2="";
        this.town="";
        this.pin="";
        this.pickup="";
        this.drop="";
        this.zone="";
        this.pickuprout="";
        this.droprout="";

      },
      fngetid:function(starrx){
        var starr = starrx;
        len=starrx.length;
        for (var i = 0; i < starrx.length; i++) {

        sid = starr[i].student_id;
        

        this.getpasssecurl = sessionStorage.getItem("addrinfo") + "/getpasssec";
        var obj0 = {"stid": "","schol": "","academic_year":""}
        obj0.stid = sid;
        obj0.schol = sessionStorage.getItem("sch");
        obj0.academic_year=localStorage.getItem("curr_sess_academicyear");
        this.getpasssecparam =obj0;
      // alert(JSON.stringify(obj0));
        this.$.getpasssecajax.generateRequest();
       this.$.numberreadajax.generateRequest();
      
     
      }

      },
       numberreadResponse:function(e){
        //alert(JSON.stringify(e.detail.response));
        //alert(sessionStorage.getItem("sch"));
        var no=e.detail.response;
        for(var i=0;i<no.length;i++)
        {
          if(no[i].school_id==sessionStorage.getItem("sch"))
           coor=no[i].conumber;
        }
      },
     getpasssecResponse:function(e){
      //alert('2');
    // alert(JSON.stringify(e.detail.response.returnval));
      stname=e.detail.response.returnval[0].student_name;
      standard=e.detail.response.returnval[0].standard;
      section=e.detail.response.returnval[0].section;
      zonename=e.detail.response.returnval[0].zone_name;
      pickuproute=e.detail.response.returnval[0].pickup_route_id;
      droproute=e.detail.response.returnval[0].drop_route_id;
      pickupoint=e.detail.response.returnval[0].pickup_point;
      droppoint=e.detail.response.returnval[0].drop_point;
      dad1=e.detail.response.returnval[0].parent_name;
      mob=e.detail.response.returnval[0].mobile;
      add1=e.detail.response.returnval[0].address1;
      add2=e.detail.response.returnval[0].address2;
      add3=e.detail.response.returnval[0].address3;
      add4=e.detail.response.returnval[0].city;
      pin=e.detail.response.returnval[0].pincode;



    
var obj={"stname":"","stnd":"","sec":"","pickp":"","pickr":"","dropp":"","dropr":"","dad1":"","add1":"","add2":"","add3":"","add4":"","pin":"","mob":"","coorno":"","schoolname":"","schooladdr":"","zonename":""}
      obj.stname=stname;
        obj.stnd=standard;
        obj.sec=section;
        obj.pickp=pickupoint;
        obj.pickr=pickuproute;
        obj.dropp=droppoint;
        obj.dropr=droproute;
        obj.dad1=dad1;
        obj.add1=add1;
        obj.add2=add2;
        obj.add3=add3;
        obj.add4=add4;
        obj.pin=pin;
        obj.mob=mob;
        obj.coorno=coor;
        obj.zonename=zonename;
        obj.schoolname=sessionStorage.getItem("schoolname");
        obj.schooladdr=sessionStorage.getItem("schooladdr");
        passarr.push(obj);
     //   alert(JSON.stringify(passarr));
        //alert('final arr is .. '+JSON.stringify(passarr));
        c++;
        if(c==len){
        //  alert('c is '+c+'  '+len);
        document.querySelector('studentpass-card').passarr1=passarr;
        c=0;}
      },
      fnsetclear:function(e){
     var obj={};
   passarr.splice(obj);
  // alert(JSON.stringify(passarr));
        
      },

      

    });
  })();
  </script>
</dom-module>
